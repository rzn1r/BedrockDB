import{world}from"@minecraft/server";const NAMESPACE="bedrockDB:";export class BedrockDB{constructor(e){this.dbName=e}fullKey(e){return`${NAMESPACE}${this.dbName}:${e}`}set(e,r){if(void 0===r)throw new Error("Cannot store undefined value in BedrockDB.");const t=JSON.stringify(r);world.setDynamicProperty(this.fullKey(e),t)}get(e){const r=world.getDynamicProperty(this.fullKey(e));if(void 0===r)return null;try{return JSON.parse(r)}catch(r){return console.warn(`[BedrockDB] Failed to parse data for key "${e}":`,r),null}}delete(e){world.setDynamicProperty(this.fullKey(e),void 0)}has(e){return void 0!==world.getDynamicProperty(this.fullKey(e))}clear(){const e=this.keys();for(const r of e)this.delete(r)}keys(){return world.getDynamicPropertyIds().filter(e=>e.startsWith(`${NAMESPACE}${this.dbName}:`)).map(e=>e.replace(`${NAMESPACE}${this.dbName}:`,""))}}